<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   viewBox="0 0 1200 800"
   version="1.1"
   id="svg52"
   sodipodi:docname="borehole-depth-mapping-diagram.svg"
   inkscape:version="1.4 (86a8ad7, 2024-10-11)"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:svg="http://www.w3.org/2000/svg">
  <sodipodi:namedview
     id="namedview52"
     pagecolor="#ffffff"
     bordercolor="#000000"
     borderopacity="0.25"
     inkscape:showpageshadow="2"
     inkscape:pageopacity="0.0"
     inkscape:pagecheckerboard="0"
     inkscape:deskcolor="#d1d1d1"
     showgrid="false"
     showguides="true"
     inkscape:zoom="1.45875"
     inkscape:cx="572.75064"
     inkscape:cy="345.15853"
     inkscape:window-width="2560"
     inkscape:window-height="1369"
     inkscape:window-x="-8"
     inkscape:window-y="-8"
     inkscape:window-maximized="1"
     inkscape:current-layer="g48" />
  <!-- Background -->
  <rect
     width="1317.9092"
     height="862.3822"
     fill="#f8f8f8"
     id="rect1"
     x="-60.325619"
     y="-30.162811"
     style="stroke-width:1.08807" />
  <!-- Title -->
  <text
     x="600"
     y="30"
     text-anchor="middle"
     font-size="24px"
     font-weight="bold"
     fill="#333333"
     id="text1">Mapping Horizontal Soil Depths to Camera Images: Angled Minirhizotron Tubes</text>
  <!-- Left Panel: 3D Borehole View -->
  <g
     transform="matrix(0.96257952,0,0,1.0001761,11.102805,77.218628)"
     id="g18">
    <!-- Ground surface -->
    <rect
       x="0"
       y="100"
       width="400"
       height="20"
       fill="#8b7355"
       stroke="#654321"
       stroke-width="2"
       id="rect2" />
    <text
       x="200"
       y="95"
       text-anchor="middle"
       font-size="14px"
       fill="#333333"
       id="text2">Ground Surface (z = 0)</text>
    <!-- Soil layers -->
    <rect
       x="0"
       y="180"
       width="400"
       height="60"
       fill="#d2b48c"
       stroke="#a0826d"
       stroke-width="1"
       opacity="0.7"
       id="rect3" />
    <rect
       x="0"
       y="240"
       width="400"
       height="60"
       fill="#deb887"
       stroke="#c19a6b"
       stroke-width="1"
       opacity="0.7"
       id="rect4" />
    <rect
       x="0"
       y="300"
       width="400"
       height="60"
       fill="#f4a460"
       stroke="#e38e3c"
       stroke-width="1"
       opacity="0.7"
       id="rect5" />
    <!-- Depth labels -->
    <text
       x="410"
       y="210"
       font-size="12px"
       fill="#333333"
       id="text5">Depth d₁</text>
    <text
       x="410"
       y="270"
       font-size="12px"
       fill="#333333"
       id="text6">Depth d₂</text>
    <text
       x="410"
       y="330"
       font-size="12px"
       fill="#333333"
       id="text7">Depth d₃</text>
    <!-- Horizontal depth lines -->
    <line
       x1="0"
       y1="180"
       x2="400"
       y2="180"
       stroke="#444444"
       stroke-width="1"
       stroke-dasharray="5, 5"
       id="line7" />
    <line
       x1="0"
       y1="240"
       x2="400"
       y2="240"
       stroke="#444444"
       stroke-width="1"
       stroke-dasharray="5, 5"
       id="line8" />
    <line
       x1="0"
       y1="300"
       x2="400"
       y2="300"
       stroke="#444444"
       stroke-width="1"
       stroke-dasharray="5, 5"
       id="line9" />
    <!-- Angled borehole -->
    <g
       transform="rotate(30,100,110)"
       id="g11">
      <!-- Borehole cylinder -->
      <rect
         x="80"
         y="110"
         width="40"
         height="300"
         fill="none"
         stroke="#333333"
         stroke-width="3"
         id="rect9" />
      <rect
         x="80"
         y="110"
         width="40"
         height="300"
         fill="#e0e0e0"
         opacity="0.3"
         id="rect10" />
      <!-- Camera representation -->
      <rect
         x="90"
         y="250"
         width="20"
         height="30"
         fill="#ff6b6b"
         stroke="#333333"
         stroke-width="2"
         rx="3"
         id="rect11" />
      <circle
         cx="100"
         cy="265"
         r="6"
         fill="#333333"
         id="circle11" />
      <text
         x="125"
         y="270"
         font-size="10px"
         fill="#333333"
         id="text11">360° Camera</text>
      <!-- Center line -->
      <line
         x1="100"
         y1="110"
         x2="100"
         y2="410"
         stroke="#666666"
         stroke-width="1"
         stroke-dasharray="3, 3"
         id="line11" />
    </g>
    <!-- Angle indicator -->
    <path
       d="m 100,110 h 50 c 5.50632,23.5779 -31.2264,62.64835 -70.300771,42.94344"
       fill="none"
       stroke="#333333"
       stroke-width="1"
       id="path11"
       sodipodi:nodetypes="ccc" />
    <text
       x="135"
       y="130"
       font-size="12px"
       fill="#333333"
       id="text12"
       style="white-space:pre;inline-size:16.8511"
       transform="matrix(1.8157032,0,0,1.4423257,-132.0258,-45.92887)"
       inkscape:transform-center-x="10.282776"
       inkscape:transform-center-y="-4.1131105"
       xml:space="preserve"><tspan
         x="135"
         y="130"
         id="tspan1">θ</tspan></text>
    <!-- Coordinate system -->
    <g
       transform="translate(350,50)"
       id="g14">
      <line
         x1="0"
         y1="0"
         x2="40"
         y2="0"
         stroke="#000000"
         stroke-width="2"
         marker-end="url(#arrowhead)"
         id="line12" />
      <line
         x1="0"
         y1="0"
         x2="0"
         y2="40"
         stroke="#000000"
         stroke-width="2"
         marker-end="url(#arrowhead)"
         id="line13" />
      <text
         x="45"
         y="5"
         font-size="12px"
         fill="#000000"
         id="text13">x</text>
      <text
         x="-10"
         y="45"
         font-size="12px"
         fill="#000000"
         id="text14">z</text>
    </g>
    <!-- Labels -->
    <text
       x="200"
       y="400"
       text-anchor="middle"
       font-size="16px"
       font-weight="bold"
       fill="#333333"
       id="text15">3D View: Angled Borehole</text>
    <!-- Show intersection curves on cylinder -->
    <g
       transform="rotate(30,100,110)"
       id="g17">
      <!-- Sinusoidal intersection lines on cylinder surface -->
      <ellipse
         cx="228.19762"
         cy="316.81485"
         rx="24.702177"
         ry="4.9103789"
         fill="none"
         stroke="#ff0000"
         stroke-width="2.13481"
         id="ellipse15"
         transform="matrix(0.87633348,-0.48170492,-0.31489473,0.9491266,0,0)"
         inkscape:transform-center-x="1.3710368"
         inkscape:transform-center-y="-6.8551842" />
      <ellipse
         cx="-63.43251"
         cy="272.58566"
         rx="22.341711"
         ry="5.9514832"
         fill="none"
         stroke="#00ff00"
         stroke-width="2.10528"
         id="ellipse16"
         transform="matrix(0.83708986,-0.54706542,0.55948775,0.82883862,0,0)"
         inkscape:transform-center-x="9.1931862"
         inkscape:transform-center-y="-1.9666841e-06" />
      <ellipse
         cx="-81.3069"
         cy="334.45682"
         rx="22.346758"
         ry="5.9476867"
         fill="none"
         stroke="#0000ff"
         stroke-width="2.10485"
         id="ellipse17"
         transform="matrix(0.86145623,-0.50783182,0.50994353,0.86020788,0,0)"
         inkscape:transform-center-x="-6.1277159"
         inkscape:transform-center-y="-23.783604" />
    </g>
  </g>
  <!-- Middle: Camera View -->
  <g
     transform="translate(500, 150)"
     id="g23">
    <!-- Cylindrical view -->
    <ellipse
       cx="100"
       cy="50"
       rx="80"
       ry="20"
       fill="#e0e0e0"
       stroke="#333"
       stroke-width="2"
       id="ellipse18" />
    <rect
       x="20"
       y="51.371037"
       width="160"
       height="200"
       fill="#e0e0e0"
       stroke="#333333"
       stroke-width="2"
       id="rect18" />
    <ellipse
       cx="100"
       cy="250"
       rx="80"
       ry="20"
       fill="#e0e0e0"
       stroke="#333"
       stroke-width="2"
       id="ellipse19" />
    <!-- Depth curves on cylinder -->
    <path
       d="M 20,100 C 73.333333,93.333333 129.40874,79.622965 182.74207,86.289632"
       fill="none"
       stroke="#ff0000"
       stroke-width="2"
       id="path19"
       sodipodi:nodetypes="cc" />
    <path
       d="m 20,150 c 53.333333,-6.66667 108.72322,-23.80463 162.05656,-17.13796"
       fill="none"
       stroke="#00ff00"
       stroke-width="2"
       id="path20"
       sodipodi:nodetypes="cc" />
    <path
       d="m 20,200 c 53.333333,-6.66667 106.66667,-27.23222 160,-20.56555"
       fill="none"
       stroke="#0000ff"
       stroke-width="2"
       id="path21"
       sodipodi:nodetypes="cc" />
    <!-- Camera inside -->
    <rect
       x="-163.15453"
       y="92.714333"
       width="30"
       height="20"
       fill="#ff6b6b"
       stroke="#333333"
       stroke-width="1"
       rx="2"
       id="rect21"
       transform="rotate(-88.956812)" />
    <circle
       cx="-178.50066"
       cy="-25.249081"
       r="8"
       fill="#333333"
       id="circle21"
       transform="rotate(-131.74119)" />
    <!-- 360° arrow -->
    <path
       d="m 117.915,-29.708073 a 30.092341,59.815885 87.89416 1 1 -1.91236,-0.229851"
       fill="none"
       stroke="#666666"
       stroke-width="2.82843"
       marker-end="url(#arrowhead)"
       id="path22"
       inkscape:transform-center-x="-0.89614266"
       inkscape:transform-center-y="-56.433987" />
    <text
       x="100"
       y="4.391603"
       text-anchor="middle"
       font-size="10px"
       fill="#666666"
       id="text22">360°</text>
    <text
       x="100"
       y="300"
       text-anchor="middle"
       font-size="16"
       font-weight="bold"
       fill="#333"
       id="text23">
      Camera View Inside Borehole
    </text>
  </g>
  <!-- Right Panel: Unrolled Image -->
  <g
     transform="translate(750, 100)"
     id="g37">
    <!-- Unrolled rectangle -->
    <rect
       x="0"
       y="50"
       width="400"
       height="250"
       fill="#f0f0f0"
       stroke="#333"
       stroke-width="2"
       id="rect23" />
    <!-- Grid lines -->
    <line
       x1="0"
       y1="175"
       x2="400"
       y2="175"
       stroke="#ddd"
       stroke-width="1"
       id="line23" />
    <line
       x1="200"
       y1="50"
       x2="200"
       y2="300"
       stroke="#ddd"
       stroke-width="1"
       id="line24" />
    <!-- Cosine depth curves (smooth cosine waves) -->
    <path
       d="M 0,100 C 66,100 134,140 200,140 C 266,140 334,100 400,100"
       fill="none"
       stroke="#FF0000"
       stroke-width="3"
       id="path24" />
    <path
       d="M 0,155 C 66,155 134,195 200,195 C 266,195 334,155 400,155"
       fill="none"
       stroke="#00FF00"
       stroke-width="3"
       id="path25" />
    <path
       d="M 0,210 C 66,210 134,250 200,250 C 266,250 334,210 400,210"
       fill="none"
       stroke="#0000FF"
       stroke-width="3"
       id="path26" />
    <!-- Labels -->
    <text
       x="420"
       y="105"
       font-size="12"
       fill="#FF0000"
       id="text26">d₁</text>
    <text
       x="420"
       y="160"
       font-size="12"
       fill="#00FF00"
       id="text27">d₂</text>
    <text
       x="420"
       y="215"
       font-size="12"
       fill="#0000FF"
       id="text28">d₃</text>
    <!-- Axis labels -->
    <text
       x="200"
       y="40"
       text-anchor="middle"
       font-size="12"
       fill="#333"
       id="text29">Angular Position (φ)</text>
    <text
       x="200"
       y="320"
       text-anchor="middle"
       font-size="12"
       fill="#333"
       id="text30">0° → 360° → 0°</text>
    <text
       x="-195.56555"
       y="-237.69923"
       transform="rotate(-90)"
       text-anchor="middle"
       font-size="12px"
       fill="#333333"
       id="text31">Distance Along Tube Depth(s)</text>
    <!-- Coordinate labels -->
    <text
       x="5"
       y="45"
       font-size="10"
       fill="#666"
       id="text32">u=0</text>
    <text
       x="370"
       y="45"
       font-size="10"
       fill="#666"
       id="text33">u=W</text>
    <text
       x="-25"
       y="55"
       font-size="10"
       fill="#666"
       id="text34">v=0</text>
    <text
       x="-25"
       y="305"
       font-size="10"
       fill="#666"
       id="text35">v=H</text>
    <text
       x="200"
       y="350"
       text-anchor="middle"
       font-size="16"
       font-weight="bold"
       fill="#333"
       id="text36">
      Unrolled Camera Image
    </text>
    <!-- Shaded regions between curves -->
    <path
       d="M 0,100 C 66,100 134,140 200,140 C 266,140 334,100 400,100 L 400,155 C 334,155 266,195 200,195 C 134,195 66,155 0,155 Z"
       fill="#FF0000"
       opacity="0.1"
       id="path36" />
    <path
       d="M 0,155 C 66,155 134,195 200,195 C 266,195 334,155 400,155 L 400,210 C 334,210 266,250 200,250 C 134,250 66,210 0,210 Z"
       fill="#00FF00"
       opacity="0.1"
       id="path37" />
  </g>
  <!-- Mathematical annotation -->
  <g
     transform="translate(100, 500)"
     id="g48">
    <rect
       x="0"
       y="0"
       width="1000"
       height="180"
       fill="#fff"
       stroke="#666"
       stroke-width="1"
       rx="5"
       id="rect37" />
    <text
       x="500"
       y="25"
       text-anchor="middle"
       font-size="14"
       font-weight="bold"
       fill="#333"
       id="text37">
      Key Mathematical Relationships
    </text>
    <!-- Formulas -->
    <text
       x="50"
       y="60"
       font-size="12px"
       fill="#333333"
       id="text38">1. Depth intersection with Tube's wall:</text>
    <text
       x="70"
       y="80"
       font-size="11"
       font-family="monospace"
       fill="#000"
       id="text39">
      s = (d - R cos(φ) cos(θ)) / sin(θ)
    </text>
    <text
       x="500"
       y="60"
       font-size="12"
       fill="#333"
       id="text40">
      2. Image mapping:
    </text>
    <text
       x="520"
       y="80"
       font-size="11"
       font-family="monospace"
       fill="#000"
       id="text41">
      u = (φ / 2π) × W
    </text>
    <text
       x="520"
       y="100"
       font-size="11"
       font-family="monospace"
       fill="#000"
       id="text42">
      v = H - s × pixels_per_cm
    </text>
    <text
       x="50"
       y="120"
       font-size="12"
       fill="#333"
       id="text43">
      3. Sinusoidal pattern equation:
    </text>
    <text
       x="70"
       y="140"
       font-size="11"
       font-family="monospace"
       fill="#000"
       id="text44">
      v(u,d) = H - (d/sin(θ))×scale + (R cos(θ)/sin(θ))×cos(2πu/W)×scale
    </text>
    <!-- Legend -->
    <text
       x="750"
       y="120"
       font-size="12"
       font-weight="bold"
       fill="#333"
       id="text45">Legend:</text>
    <line
       x1="770"
       y1="135"
       x2="800"
       y2="135"
       stroke="#FF0000"
       stroke-width="2"
       id="line45" />
    <text
       x="810"
       y="140"
       font-size="11"
       fill="#333"
       id="text46">Depth d₁</text>
    <line
       x1="770"
       y1="150"
       x2="800"
       y2="150"
       stroke="#00FF00"
       stroke-width="2"
       id="line46" />
    <text
       x="810"
       y="155"
       font-size="11"
       fill="#333"
       id="text47">Depth d₂</text>
    <line
       x1="770"
       y1="165"
       x2="800"
       y2="165"
       stroke="#0000FF"
       stroke-width="2"
       id="line47" />
    <text
       x="810"
       y="170"
       font-size="11"
       fill="#333"
       id="text48">Depth d₃</text>
  </g>
  <!-- Process arrows -->
  <defs
     id="defs48">
    <marker
       id="arrowhead"
       markerWidth="10"
       markerHeight="7"
       refX="9"
       refY="3.5"
       orient="auto">
      <polygon
         points="0 0, 10 3.5, 0 7"
         fill="#666"
         id="polygon48" />
    </marker>
  </defs>
  <!-- Arrow from 3D to Camera -->
  <path
     d="M 450,250 L 490,250"
     fill="none"
     stroke="#666"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="path48" />
  <!-- Arrow from Camera to Unrolled -->
  <path
     d="m 685.48415,248.62896 h 60"
     fill="none"
     stroke="#666666"
     stroke-width="2"
     marker-end="url(#arrowhead)"
     id="path49" />
  <!-- Annotations -->
  <text
     x="467.94345"
     y="230.40274"
     text-anchor="middle"
     font-size="10px"
     fill="#666666"
     id="text49">Camera</text>
  <text
     x="468.62897"
     y="240.60411"
     text-anchor="middle"
     font-size="10px"
     fill="#666666"
     id="text50">captures</text>
  <text
     x="711.37103"
     y="227.66068"
     text-anchor="middle"
     font-size="10px"
     fill="#666666"
     id="text51">Unroll</text>
  <text
     x="711.37103"
     y="239.91859"
     text-anchor="middle"
     font-size="10px"
     fill="#666666"
     id="text52">image</text>
</svg>
